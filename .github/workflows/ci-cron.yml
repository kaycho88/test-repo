name: Deploy Production to SNUH naver cloud
on:
  schedule:
    - cron: "* * * * *"

jobs:
  deploy:
    name: Deploy - SNUH prod
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Check commit history within last 7 days
        run: |
          echo "COMMITS_WITHIN_7DAYS=$(git log --since=$(date -u -d @$(( $(date -u +%s) - 7*24*60*60 )) +'%Y-%m-%dT%H:%M:%SZ') --oneline)" >> $GITHUB_ENV
        # if [ "$(git log --since=$(date -u -d @$(( $(date -u +%s) - 7*24*60*60 )) +%Y-%m-%dT%H:%M:%SZ) --oneline)" ]; then
        #   echo "Commits found in the last 7 days. Triggering deployment..."
        # else
        #   echo "No commits in the last 7 days. Skipping deployment."
        #   exit 78
        # fi

      - name: After checking process
        if: env.COMMITS_WITHIN_7DAYS == ''
        run: echo "After checking process.. my deployment process running here..."
