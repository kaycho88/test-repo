name: Deploy Production to SNUH naver cloud
on:
  schedule:
    - cron: "* * * * *"

jobs:
  deploy:
    name: Deploy - SNUH prod
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Check commit history within last 7 days
        run: |
          echo "git log --since="$(date -d '7 days ago' --utc +%Y-%m-%dT%H:%M:%SZ)" --oneline"
          if [ "$(git log --since="$(date -d '7 days ago' --utc +%Y-%m-%dT%H:%M:%SZ)" --oneline)" ]; then
            echo "Commits found in the last 7 days. Triggering deployment..."
          else
            echo "No commits in the last 7 days. Skipping deployment."
            exit 78  # neutral exit (neither a success, nor a failure)
          fi

      - name: After checking process
        run: echo "After checking process.. my deployment process running here..."
